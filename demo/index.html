<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å¹¸è¿è½¬ç›˜</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        font-family: Arial, sans-serif;
      }
      .canvas-box {
        width: 600px;
        height: 600px;
        display: flex;
        justify-content: center;
      }
      canvas {
        margin: 20px 0;
      }
      .controls {
        display: flex;
        gap: 10px;
      }
      button {
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
      }
      .start-btn {
        background: #4caf50;
        color: white;
      }
      .stop-btn {
        background: #f44336;
        color: white;
      }
      .result {
        margin: 20px;
        font-size: 18px;
        font-weight: bold;
      }
      .arrow-controls {
        margin: 20px 0;
        display: flex;
        gap: 15px;
        align-items: center;
      }
      .arrow-controls label {
        font-size: 14px;
      }
      .arrow-controls input,
      .arrow-controls select {
        padding: 5px;
        margin-left: 5px;
      }
      .border-controls {
        margin: 10px 0;
        display: flex;
        gap: 15px;
        align-items: center;
        padding: 10px;
        background: #f5f5f5;
        border-radius: 8px;
      }
      .border-controls label {
        font-size: 14px;
      }
      .border-controls input,
      .border-controls select {
        padding: 5px;
        margin-left: 5px;
      }
    </style>
  </head>
  <body>
    <h1>å¹¸è¿è½¬ç›˜ Demo</h1>
    <div class="result" id="result"></div>
    <div class="controls">
      <button class="start-btn" onclick="startWheel()">å¼€å§‹è½¬ç›˜</button>
      <button class="stop-btn" onclick="stopWheel()">åœæ­¢è½¬ç›˜</button>
    </div>
    <div class="canvas-box">
      <canvas id="wheel-canvas"></canvas>
    </div>

    <!-- ç®­å¤´é…ç½®æ§ä»¶ -->
    <div class="arrow-controls">
      <label>ç®­å¤´è·ç¦»: <input type="range" id="distance" min="0" max="1000" value="180" /></label>
      <label>ç®­å¤´å¤§å°: <input type="range" id="size" min="10" max="30" value="15" /></label>
      <label>ç®­å¤´é¢œè‰²: <input type="color" id="color" value="#333333" /></label>
      <label>æ–¹å‘: <input type="range" id="direction" min="0" max="359" value="0" /></label>
    </div>

    <!-- è¾¹æ¡†é…ç½®æ§ä»¶ -->
    <div class="border-controls">
      <label>
        è¾¹æ¡†å®½åº¦:
        <input type="range" id="borderWidth" min="0" max="20" value="5" />
      </label>
      <label> è¾¹æ¡†é¢œè‰²: <input type="color" id="borderColor" value="#ff0000" /> </label>
      <label>
        è¾¹æ¡†æ ·å¼:
        <select id="borderStyle">
          <option value="solid">å®çº¿</option>
          <option value="dashed">è™šçº¿</option>
          <option value="dotted">ç‚¹çº¿</option>
        </select>
      </label>
      <label>
        è½®ç›˜å†…è¾¹è·:
        <input type="range" id="innerPadding" min="0" max="50" value="0" />
        <span id="innerPaddingValue">0</span>
      </label>
      <label>
        ç”»å¸ƒå†…è¾¹è·:
        <input type="range" id="canvasPadding" min="0" max="100" value="0" />
        <span id="canvasPaddingValue">0</span>
      </label>
    </div>

    <!-- æ‰‡å½¢æè¾¹é…ç½®æ§ä»¶ -->
    <div class="border-controls">
      <label>
        æ‰‡å½¢æè¾¹å®½åº¦:
        <input type="range" id="sectorStrokeWidth" min="0" max="10" value="0" />
      </label>
      <label>
        æ‰‡å½¢æè¾¹é¢œè‰²:
        <input type="color" id="sectorStrokeColor" value="#ffffff" />
      </label>
    </div>

    <!-- å›¾ç‰‡é…ç½®æ§ä»¶ -->
    <div class="border-controls">
      <label>èƒŒæ™¯å›¾ç‰‡URL: <input type="text" id="bgImageUrl" placeholder="è¾“å…¥å›¾ç‰‡URL" style="width: 300px" /></label>
      <button onclick="setBackgroundImage()">è®¾ç½®èƒŒæ™¯</button>
      <button onclick="clearBackgroundImage()">æ¸…é™¤èƒŒæ™¯</button>
      <br /><br />
      <label>æ‰‡å½¢å›¾ç‰‡URL: <input type="text" id="sectorImageUrl" placeholder="è¾“å…¥å›¾ç‰‡URL" style="width: 200px" value="" /></label>
      <label>æ‰‡å½¢ID: <input type="text" id="sectorImageId" placeholder="å¦‚ï¼š1" style="width: 50px" value="1" /></label>
      <button onclick="setSectorImage()">è®¾ç½®æ‰‡å½¢å›¾ç‰‡</button>
      <button onclick="clearSectorImage()">æ¸…é™¤æ‰‡å½¢å›¾ç‰‡</button>
    </div>

    <!-- ä¸­å¿ƒæŒ‰é’®é…ç½®æ§ä»¶ -->
    <div class="border-controls" style="flex-wrap: wrap; max-width: 1200px">
      <h3 style="margin: 0 0 10px 0; width: 100%">ä¸­å¿ƒæŒ‰é’®é…ç½®</h3>

      <!-- åŸºç¡€é…ç½®è¡Œ -->
      <div style="width: 100%; margin-bottom: 10px">
        <div>
          æ˜¾ç¤ºä¸­å¿ƒæŒ‰é’®:
          <input type="checkbox" id="showCenterButton" checked />
        </div>
        <div>
          å‘¼å¸ç¯åŠ¨ç”»:
          <input type="checkbox" id="centerButtonAnimation" checked />
        </div>
        <div>
          åŠ¨ç”»é€Ÿåº¦:
          <input type="range" id="centerButtonAnimationSpeed" min="0.0001" max="0.01" step="0.0001" value="0.001" />
        </div>
        <div>
          åŠ¨ç”»å¹…åº¦:
          <input type="range" id="centerButtonAnimationScale" min="0.01" max="0.3" step="0.01" value="0.1" />
        </div>
        <div>
          æŒ‰é’®å®½åº¦:
          <input type="range" id="centerButtonWidth" min="0" max="100" value="20" />
        </div>
        <div>
          æŒ‰é’®é«˜åº¦:
          <input type="range" id="centerButtonHeight" min="0" max="100" value="20" />
        </div>
        <div>
          æŒ‰é’®èƒŒæ™¯è‰²:
          <input type="color" id="centerButtonBgColor" value="#ffffff" />
        </div>
      </div>

      <!-- èƒŒæ™¯å›¾ç‰‡é…ç½®è¡Œ -->
      <div style="width: 100%; margin-bottom: 10px">
        <label>
          æŒ‰é’®èƒŒæ™¯å›¾ç‰‡URL:
          <input type="text" id="centerButtonBgImageUrl" placeholder="è¾“å…¥å›¾ç‰‡URL" style="width: 300px" />
        </label>
        <button onclick="setCenterButtonBgImage()">è®¾ç½®èƒŒæ™¯å›¾</button>
        <button onclick="clearCenterButtonBgImage()">æ¸…é™¤èƒŒæ™¯å›¾</button>
      </div>

      <!-- è¾¹æ¡†é…ç½®è¡Œ -->
      <div style="width: 100%; margin-bottom: 10px">
        <label>
          æŒ‰é’®è¾¹æ¡†å®½åº¦:
          <input type="range" id="centerButtonBorderWidth" min="0" max="10" value="3" />
        </label>
        <label>
          æŒ‰é’®è¾¹æ¡†é¢œè‰²:
          <input type="color" id="centerButtonBorderColor" value="#333333" />
        </label>
        <label>
          æŒ‰é’®è¾¹æ¡†æ ·å¼:
          <select id="centerButtonBorderStyle">
            <option value="solid" selected>å®çº¿</option>
            <option value="dashed">è™šçº¿</option>
            <option value="dotted">ç‚¹çº¿</option>
          </select>
        </label>
      </div>

      <!-- ç®­å¤´åŸºç¡€é…ç½®è¡Œ -->
      <div style="width: 100%; margin-bottom: 10px">
        <label>
          æŒ‰é’®ç®­å¤´å¤§å°:
          <input type="range" id="centerButtonArrowSize" min="5" max="20" value="12" />
        </label>
        <label>
          æŒ‰é’®ç®­å¤´é¢œè‰²:
          <input type="color" id="centerButtonArrowColor" value="#333333" />
        </label>
        <label>
          ç®­å¤´å‚ç›´åç§»:
          <input type="range" id="centerButtonArrowOffsetY" min="-20" max="20" value="0" />
          <span id="offsetYValue">0</span>
        </label>
      </div>

      <!-- ç®­å¤´å›¾ç‰‡é…ç½®è¡Œ -->
      <div style="width: 100%; margin-bottom: 10px">
        <label>
          æŒ‰é’®ç®­å¤´å›¾ç‰‡URL:
          <input type="text" id="centerButtonArrowImageUrl" placeholder="è¾“å…¥å›¾ç‰‡URL" style="width: 300px" />
        </label>
        <button onclick="setCenterButtonArrowImage()">è®¾ç½®ç®­å¤´å›¾</button>
        <button onclick="clearCenterButtonArrowImage()">æ¸…é™¤ç®­å¤´å›¾</button>
      </div>
    </div>

    <script type="module">
      import { LuckyWheelEngine } from "../dist-core/LuckyWheelEngine.esm.js";

      // è½¬ç›˜é…ç½®
      const wheelConfig = {
        sectors: [
          {
            id: "1",
            text: "aaaaaaaaaaaaasdasdasdasdasd",
            color: "#FF6B6E",
            image: {
              url: "https://cdn.pixabay.com/photo/2017/08/30/17/26/please-2697951_640.jpg",
            },
            stroke: {
              width: 5, // æè¾¹å®½åº¦
              color: "#000000", // æè¾¹é¢œè‰²
            },
          },
          {
            id: "2",
            text: "äºŒç­‰å¥–",
            color: "#4ECDC4",
          },
          {
            id: "3",
            text: "ä¸‰ç­‰å¥–",
            color: "#45B7D1",
            image: {
              url: "https://cdn.pixabay.com/photo/2017/08/30/17/26/please-2697951_640.jpg",
            },
          },
          {
            id: "8",
            text: "é¼“åŠ±å¥–",
            color: "#6A0572",
            image: {
              url: "https://cdn.pixabay.com/photo/2017/08/30/17/26/please-2697951_640.jpg",
            },
          },
          {
            id: "17",
            text: "è°¢è°¢å‚ä¸",
            color: "#FF9FF3",
            image: {
              url: "https://cdn.pixabay.com/photo/2017/08/30/17/26/please-2697951_640.jpg",
            },
          },
          { id: "18", text: "å¹¸è¿å¥–", color: "#FF6F61" },
          { id: "19", text: "ä¸€ç­‰å¥–", color: "#FF6B6B" },
          { id: "20", text: "äºŒç­‰å¥–", color: "#4ECDC4" },
          {
            id: "aaa",
            text: "è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æµ‹è¯•æ–‡æœ¬å•Šå“ˆ",
            color: "#000000",
            textConfig: {
              fontSize: 14,
              color: "#E60000FF",
              maxLines: 4,
              lineHeight: 16,
              textAlign: "center",
              direction: "horizontal",
              offsetX: 0,
              offsetY: 0,
            },
            // æµ‹è¯•å†…å®¹å›¾ç‰‡åŠŸèƒ½
            contentImage: {
              url: "https://img.freepik.com/free-photo/3d-view-adorable-pet-cat_23-2150499168.jpg?semt=ais_hybrid&w=740",
              width: 30,
              height: 30,
              offsetX: 0, // æµ‹è¯•Xæ–¹å‘åç§»
              offsetY: 0, // æµ‹è¯•Yæ–¹å‘åç§»
              opacity: 1,
            },
          },
        ],
        targetDirection: 0,
        stopOffsetRange: 1,
        innerPadding: 20, // è½®ç›˜å†…è¾¹è·
        canvasPadding: 30, // ç”»å¸ƒå†…è¾¹è·
        backgroundImage: "https://images.pexels.com/photos/2174974/pexels-photo-2174974.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",
        arrow: {
          size: 15,
          color: "#333333",
          image: "https://img95.699pic.com/element/40180/9917.png_300.png",
          imageWidth: 30, // ç®­å¤´å›¾ç‰‡å®½åº¦
          imageHeight: 30, // ç®­å¤´å›¾ç‰‡é«˜åº¦
          visible: true,
        },
        border: {
          width: 5,
          color: "#ff0000",
          style: "solid",
        },
        // å…¨å±€æ‰‡å½¢æè¾¹é…ç½®
        sectorStroke: {
          width: 5, // é»˜è®¤æ— æè¾¹
          color: "#ffff",
        },
        // ä¸­å¿ƒæŒ‰é’®é…ç½®
        centerButton: {
          visible: true,
          animation: true, // é»˜è®¤å¼€å¯å‘¼å¸ç¯åŠ¨ç”»
          width: 80,
          height: 80,
          backgroundColor: "#ffffff",
          backgroundImage: "https://img.freepik.com/free-photo/3d-view-adorable-pet-cat_23-2150499168.jpg?semt=ais_hybrid&w=740",
          border: {
            width: 3,
            color: "#333333",
            style: "solid",
          },

          arrow: {
            size: 20,
            color: "#333333",
            offsetY: -30,
            image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRg7YPW9MYXhIaiEYqmUOJNP85XFdAr9y6ccexXNFPRP2X1yMLd2fjWXUTR-uzgBbjN_Hs&usqp=CAU",
            imageWidth: 30,
            imageHeight: 30,
          },
        },
      };

      let wheel;
      let targetId;

      // åˆ›å»ºè½¬ç›˜å¹¶è®¾ç½®å›è°ƒçš„è¾…åŠ©å‡½æ•°
      function createWheelWithCallback() {
        const canvas = document.getElementById("wheel-canvas");
        wheel = new LuckyWheelEngine(canvas, wheelConfig);

        // è®¾ç½®ä¸­å¿ƒæŒ‰é’®ç‚¹å‡»å›è°ƒ
        wheel.setCenterButtonClickCallback(() => {
          console.log("å¼€å§‹æ—‹è½¬");
          wheel.start();

          setTimeout(() => {
            // 1ç§’åè‡ªåŠ¨åœæ­¢è½¬ç›˜
            if (wheel) {
              wheel.stop("aaa", (result) => {
                alert(` æ­å–œæ‚¨æŠ½ä¸­: ${result.text}!`);
                // åœæ­¢å®Œæˆå›è°ƒï¼Œæ˜¾ç¤ºç»“æœ
                document.getElementById("result").textContent = `ğŸ‰ æ­å–œæ‚¨æŠ½ä¸­: ${result.text}!`;
              });
            }
          }, 3000); // 3ç§’ååœæ­¢
        });

        return wheel;
      }

      // åˆå§‹åŒ–è½¬ç›˜
      function initWheel() {
        createWheelWithCallback();

        // æ·»åŠ ç®­å¤´é…ç½®ç›‘å¬å™¨
        setupArrowControls();
        // æ·»åŠ è¾¹æ¡†é…ç½®ç›‘å¬å™¨
        setupBorderControls();
        // æ·»åŠ æ‰‡å½¢æè¾¹é…ç½®ç›‘å¬å™¨
        setupSectorStrokeControls();
        // æ·»åŠ ä¸­å¿ƒæŒ‰é’®é…ç½®ç›‘å¬å™¨
        setupCenterButtonControls();
      }

      // è®¾ç½®ç®­å¤´æ§åˆ¶å™¨
      function setupArrowControls() {
        const distanceSlider = document.getElementById("distance");
        const sizeSlider = document.getElementById("size");
        const colorPicker = document.getElementById("color");
        const directionSlider = document.getElementById("direction");

        distanceSlider.addEventListener("input", (e) => {
          wheel.setArrowDistance(parseInt(e.target.value));
        });

        sizeSlider.addEventListener("input", (e) => {
          wheel.setArrowConfig({ size: parseInt(e.target.value) });
        });

        colorPicker.addEventListener("input", (e) => {
          wheel.setArrowConfig({ color: e.target.value });
        });

        directionSlider.addEventListener("input", (e) => {
          wheel.setTargetDirection(parseInt(e.target.value));
        });
      }

      // è®¾ç½®è¾¹æ¡†æ§åˆ¶å™¨
      function setupBorderControls() {
        const borderWidthSlider = document.getElementById("borderWidth");
        const borderColorPicker = document.getElementById("borderColor");
        const borderStyleSelect = document.getElementById("borderStyle");
        const innerPaddingSlider = document.getElementById("innerPadding");
        const innerPaddingValue = document.getElementById("innerPaddingValue");
        const canvasPaddingSlider = document.getElementById("canvasPadding");
        const canvasPaddingValue = document.getElementById("canvasPaddingValue");

        borderWidthSlider.addEventListener("input", (e) => {
          wheel.setBorderWidth(parseInt(e.target.value));
        });

        borderColorPicker.addEventListener("input", (e) => {
          wheel.setBorderColor(e.target.value);
        });

        borderStyleSelect.addEventListener("change", (e) => {
          wheel.setBorderStyle(e.target.value);
        });

        innerPaddingSlider.addEventListener("input", (e) => {
          const paddingValue = parseInt(e.target.value);
          innerPaddingValue.textContent = paddingValue;
          wheel.setInnerPadding(paddingValue);
        });

        canvasPaddingSlider.addEventListener("input", (e) => {
          const paddingValue = parseInt(e.target.value);
          canvasPaddingValue.textContent = paddingValue;
          wheelConfig.canvasPadding = paddingValue;
          // é‡æ–°åˆ›å»ºè½®ç›˜ä»¥åº”ç”¨ç”»å¸ƒå†…è¾¹è·
          createWheelWithCallback();
        });
      }

      // è®¾ç½®æ‰‡å½¢æè¾¹æ§åˆ¶å™¨
      function setupSectorStrokeControls() {
        const sectorStrokeWidthSlider = document.getElementById("sectorStrokeWidth");
        const sectorStrokeColorPicker = document.getElementById("sectorStrokeColor");

        sectorStrokeWidthSlider.addEventListener("input", (e) => {
          wheel.setSectorStrokeWidth(parseInt(e.target.value));
        });

        sectorStrokeColorPicker.addEventListener("input", (e) => {
          wheel.setSectorStrokeColor(e.target.value);
        });
      }

      // è®¾ç½®ä¸­å¿ƒæŒ‰é’®æ§åˆ¶å™¨
      function setupCenterButtonControls() {
        // æ˜¾ç¤º/éšè—ä¸­å¿ƒæŒ‰é’®
        const showCenterButton = document.getElementById("showCenterButton");

        showCenterButton.addEventListener("change", (e) => {
          if (wheelConfig.centerButton) {
            wheelConfig.centerButton.visible = e.target.checked;
            createWheelWithCallback();
          }
        });

        // å‘¼å¸ç¯åŠ¨ç”»æ§åˆ¶
        const centerButtonAnimation = document.getElementById("centerButtonAnimation");
        const animationSpeedSlider = document.getElementById("centerButtonAnimationSpeed");
        const animationScaleSlider = document.getElementById("centerButtonAnimationScale");

        centerButtonAnimation.addEventListener("change", (e) => {
          if (wheelConfig.centerButton) {
            wheelConfig.centerButton.animation = e.target.checked;
            createWheelWithCallback();
          }
        });

        animationSpeedSlider.addEventListener("input", (e) => {
          if (wheel) {
            wheel.setCenterButtonAnimationSpeed(parseFloat(e.target.value));
          }
        });

        animationScaleSlider.addEventListener("input", (e) => {
          if (wheel) {
            wheel.setCenterButtonAnimationScale(parseFloat(e.target.value));
          }
        });

        // æŒ‰é’®å°ºå¯¸æ§åˆ¶
        const widthSlider = document.getElementById("centerButtonWidth");
        const heightSlider = document.getElementById("centerButtonHeight");

        widthSlider.addEventListener("input", (e) => {
          if (wheelConfig.centerButton) {
            wheelConfig.centerButton.width = parseInt(e.target.value);
            createWheelWithCallback();
          }
        });

        heightSlider.addEventListener("input", (e) => {
          if (wheelConfig.centerButton) {
            wheelConfig.centerButton.height = parseInt(e.target.value);
            createWheelWithCallback();
          }
        });

        // æŒ‰é’®èƒŒæ™¯è‰²æ§åˆ¶
        const bgColorPicker = document.getElementById("centerButtonBgColor");
        bgColorPicker.addEventListener("input", (e) => {
          if (wheelConfig.centerButton) {
            wheelConfig.centerButton.backgroundColor = e.target.value;
            createWheelWithCallback();
          }
        });

        // æŒ‰é’®è¾¹æ¡†æ§åˆ¶
        const borderWidthSlider = document.getElementById("centerButtonBorderWidth");
        const borderColorPicker = document.getElementById("centerButtonBorderColor");
        const borderStyleSelect = document.getElementById("centerButtonBorderStyle");

        borderWidthSlider.addEventListener("input", (e) => {
          if (wheelConfig.centerButton && wheelConfig.centerButton.border) {
            wheelConfig.centerButton.border.width = parseInt(e.target.value);
            createWheelWithCallback();
          }
        });

        borderColorPicker.addEventListener("input", (e) => {
          if (wheelConfig.centerButton && wheelConfig.centerButton.border) {
            wheelConfig.centerButton.border.color = e.target.value;
            createWheelWithCallback();
          }
        });

        borderStyleSelect.addEventListener("change", (e) => {
          if (wheelConfig.centerButton && wheelConfig.centerButton.border) {
            wheelConfig.centerButton.border.style = e.target.value;
            createWheelWithCallback();
          }
        });

        // æŒ‰é’®ç®­å¤´æ§åˆ¶
        const arrowSizeSlider = document.getElementById("centerButtonArrowSize");
        const arrowColorPicker = document.getElementById("centerButtonArrowColor");
        const arrowOffsetYSlider = document.getElementById("centerButtonArrowOffsetY");
        const offsetYValue = document.getElementById("offsetYValue");

        arrowSizeSlider.addEventListener("input", (e) => {
          if (wheelConfig.centerButton && wheelConfig.centerButton.arrow) {
            wheelConfig.centerButton.arrow.size = parseInt(e.target.value);
            createWheelWithCallback();
          }
        });

        arrowColorPicker.addEventListener("input", (e) => {
          if (wheelConfig.centerButton && wheelConfig.centerButton.arrow) {
            wheelConfig.centerButton.arrow.color = e.target.value;
            createWheelWithCallback();
          }
        });

        arrowOffsetYSlider.addEventListener("input", (e) => {
          const offsetValue = parseInt(e.target.value);
          offsetYValue.textContent = offsetValue;
          if (wheelConfig.centerButton && wheelConfig.centerButton.arrow) {
            wheelConfig.centerButton.arrow.offsetY = offsetValue;
            createWheelWithCallback();
          }
        });
      }

      // è®¾ç½®èƒŒæ™¯å›¾ç‰‡
      window.setBackgroundImage = function () {
        const url = document.getElementById("bgImageUrl").value;
        if (url) {
          wheel.setBackgroundImage(url);
        }
      };

      // æ¸…é™¤èƒŒæ™¯å›¾ç‰‡
      window.clearBackgroundImage = function () {
        wheel.setBackgroundImage(undefined);
      };

      // è®¾ç½®æ‰‡å½¢å›¾ç‰‡
      window.setSectorImage = function () {
        const url = document.getElementById("sectorImageUrl").value;
        const id = document.getElementById("sectorImageId").value;
        if (typeof wheel.setSectorImage === "function") {
          wheel.setSectorImage(id, url);
        }
      };

      // æ¸…é™¤æ‰‡å½¢å›¾ç‰‡
      window.clearSectorImage = function () {
        const id = document.getElementById("sectorImageId").value;
        if (id) {
          wheel.setSectorImage(id, undefined);
        }
      };

      // è®¾ç½®ä¸­å¿ƒæŒ‰é’®èƒŒæ™¯å›¾ç‰‡
      window.setCenterButtonBgImage = function () {
        const url = document.getElementById("centerButtonBgImageUrl").value;
        if (url && wheelConfig.centerButton) {
          wheelConfig.centerButton.backgroundImage = url;
          createWheelWithCallback();
        }
      };

      // æ¸…é™¤ä¸­å¿ƒæŒ‰é’®èƒŒæ™¯å›¾ç‰‡
      window.clearCenterButtonBgImage = function () {
        if (wheelConfig.centerButton) {
          wheelConfig.centerButton.backgroundImage = undefined;
          createWheelWithCallback();
        }
      };

      // è®¾ç½®ä¸­å¿ƒæŒ‰é’®ç®­å¤´å›¾ç‰‡
      window.setCenterButtonArrowImage = function () {
        const url = document.getElementById("centerButtonArrowImageUrl").value;
        if (url && wheelConfig.centerButton && wheelConfig.centerButton.arrow) {
          wheelConfig.centerButton.arrow.image = url;
          createWheelWithCallback();
        }
      };

      // æ¸…é™¤ä¸­å¿ƒæŒ‰é’®ç®­å¤´å›¾ç‰‡
      window.clearCenterButtonArrowImage = function () {
        if (wheelConfig.centerButton && wheelConfig.centerButton.arrow) {
          wheelConfig.centerButton.arrow.image = undefined;
          createWheelWithCallback();
        }
      };

      // å¼€å§‹è½¬ç›˜
      window.startWheel = function () {
        if (!wheel) return;

        document.getElementById("result").textContent = "";
        wheel.start(); // ä¸ä¼ å…¥idï¼Œè®©è½¬ç›˜æ— é™æ—‹è½¬

        setTimeout(() => {
          // 3ç§’åè‡ªåŠ¨åœæ­¢è½¬ç›˜
          if (wheel) {
            // éšæœºé€‰æ‹©ä¸€ä¸ªå¥–é¡¹ä½œä¸ºç›®æ ‡
            // const sectors = wheelConfig.sectors;
            // targetId = sectors[Math.floor(Math.random() * sectors.length)].id;

            wheel.stop("1", (result) => {
              alert(`æ­å–œæ‚¨æŠ½ä¸­: ${result.text}!`);
              // åœæ­¢å®Œæˆå›è°ƒï¼Œæ˜¾ç¤ºç»“æœ
              document.getElementById("result").textContent = `ğŸ‰ æ­å–œæ‚¨æŠ½ä¸­: ${result.text}!`;
            });
          }
        }, 3000); // 3ç§’ååœæ­¢
      };

      // åœæ­¢è½¬ç›˜
      window.stopWheel = function () {
        if (!wheel) return;

        // éšæœºé€‰æ‹©ä¸€ä¸ªå¥–é¡¹ä½œä¸ºç›®æ ‡
        // const sectors = wheelConfig.sectors;
        // targetId = sectors[Math.floor(Math.random() * sectors.length)].id;

        wheel.stop("aaa", (result) => {
          alert(`æ­å–œæ‚¨æŠ½ä¸­: ${result.text}!`);
          // åœæ­¢å®Œæˆå›è°ƒï¼Œæ˜¾ç¤ºç»“æœ
          document.getElementById("result").textContent = `ğŸ‰ æ­å–œæ‚¨æŠ½ä¸­: ${result.text}!`;
        });
      };

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
      document.addEventListener("DOMContentLoaded", initWheel);
    </script>
  </body>
</html>
